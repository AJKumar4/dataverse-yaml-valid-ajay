{
    "manifest": {
        "version": "0.0.1",
        "discoveryPort": {
            "name": "Car prices barcelona CSV delimiter Test Multiple Entity",
            "description": "Test CSV file run",
            "category": "customer",
            "image": "Google ",
            "autofillUserinfo": true,
            "tags": [],
            "extra": {},
            "createdBy": {
                "name": "undefined undefined",
                "userid": "ce73bbc0-837d-465d-9649-7d83ef572a48",
                "email": "sarath.saleem@maf.ae"
            },
            "createdTs": 1673512557897,
            "updatedTs": 1673512557897
        },
        "inputPorts": [{
            "alias": "car_input_port",
            "description": "string",
            "tags": [],
            "extra": {},
            "syncType": "pull",
            "type": "s3",
            "sourceUrn": "urn:dv:datasource:713e6921-ac91-4289-93d0-fa599488f150",
            "entityId": {
                "alias": "car_prices",
                "createEntity": true,
                "type": "s3-bucket",
                "entityPath": "s3a://dp-input-bucket/user_car_prices_barcelona_2022_csv/",
                "entityFilterPatternMatch": "*",
                "sourceSchemaUrn": "urn:dv:schema:9d4716d4",
                "projectSchemaUrn": "urn:dv:schema:9d4716d6",
                "fileFormat": "csv",
                "delimiter": ",",
                "header": "true,",
                "filter": "brand = 'BMW'",
                "processingTimeColumn": ["processing_time"],
                "actualTimeColumn": ["processing_time"],
                "projection": ["brand", "model", "engine", "year", "location"]
            }
        }, {
            "alias": "car_input_port_2",
            "description": "string",
            "tags": [],
            "extra": {},
            "syncType": "pull",
            "type": "s3",
            "sourceUrn": "urn:dv:datasource:713e6921-ac91-4289-93d0-fa599488f150",
            "entityId": {
                "alias": "car_prices_csv",
                "createEntity": true,
                "type": "s3-bucket",
                "entityPath": "s3a://dp-input-bucket/user_car_prices_barcelona_2022_csv/",
                "entityFilterPatternMatch": "*",
                "sourceSchemaUrn": "urn:dv:schema:9d4716d4",
                "projectSchemaUrn": "urn:dv:schema:9d4716d6",
                "fileFormat": "csv",
                "delimiter": ",",
                "header": "true,",
                "filter": "brand = 'BMW'",
                "processingTimeColumn": ["processing_time"],
                "actualTimeColumn": ["processing_time"],
                "projection": ["brand", "model", "engine", "year", "location"]
            }
        }],
        "stateManagement": {
            "alias": "car_prices_barcelona",
            "refreshInterval": "00 10 * * *",
            "logicalSchemaUrn": "${urn:dv:schema:263deedb-916b-40f2-9740-6ee02ce9b8b9}",
            "retentionVersions": "10",
            "updateStrategy": "SCD-2",
            "productStoreState": {
                "logicalSchemaUrn": "${urn:dv:schema:263deedb-916b-40f2-9740-6ee02ce9b8b9}",
                "retentionVersions": "10"
            },
            "updateStrategyOptions": [{
                "entityRef": "${urn:dv:datasource:6d4714c3}:1",
                "uniqueKeyColumns": ["customer_id"],
                "changeTrackColumns": ["cust_title_desc", "cust_birthday", "cust_nationality"]
            }]
        },
        "transformation": {
            "sql": "select * from car_prices"
        },
        "gitRepoInfo": {
            "owner": "sarathmaf",
            "repo": "test-dataproduct",
            "branch": "main",
            "url": "https://api.github.com/repos/sarathmaf/test-dataproduct"
        }
    },
    "productId": "849ec12a-e6d3-4a8d-a3fd-34935718fc5d",
    "productResolutionInfo": {
        "inputPorts": {
            "sourceDetails": [{
                "alias": "car_input_port",
                "sourceUrn": "S3 Sandbox4",
                "connectionProperties": {
                    "s3": {
                        "accessKeyId": "fdg",
                        "secretAccessKey": "fdg",
                        "region": "test"
                    }
                }
            }, {
                "alias": "car_input_port_2",
                "sourceUrn": "S3 Sandbox4",
                "connectionProperties": {
                    "s3": {
                        "accessKeyId": "fdg",
                        "secretAccessKey": "fdg",
                        "region": "test"
                    }
                }
            }]
        },

"stateManagement": {
            "sourceDetails": [{
                "alias": "mafh-analytics-data-state",
                "sourceUrn": "urn:dv:datasource:crf-customers-6d4714c3",
                "connectionProperties": {
                    "s3": {
                        "accessKeyId": "${env_state_crf-customers-6d4714c3_accessKeyId}",
                        "secretAccessKey": "${env_state_crf-customers-6d4714c3_secretAccessKey}",
                        "region": "eu-west-1"
                    }
                }
            }],
            "logicalSchema": {
                "logicalSchemaUrn": "${urn:dv:schema:undefined}",
                "schemaDefinition": {
                    "properties": {
                        "primaryKey": "string",
                        "structure": {
                            "type": "object",
                            "additionalProperties": false,
                            "properties": {
                                "firstName": {
                                    "type": "string"
                                },
                                "age": {
                                    "type": "integer"
                                },
                                "gender": {
                                    "type": "string",
                                    "enum": ["male", "female"]
                                },
                                "address": {
                                    "type": "object",
                                    "properties": {
                                        "streetNumber": {
                                            "type": "integer"
                                        },
                                        "streetName": {
                                            "type": "string"
                                        }
                                    }
                                },
                                "titles": {
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    }
                                }
                            },
                            "required": ["name"]
                        },
                        "isActive": true,
                        "version": 1
                    },
                    "required": ["product_name", "product_key"]
                }
            },
            "transformation": {
                "language": "sql",
                "env": "spark",
                "dependencyLibs": []
            }
        }
    }
}
